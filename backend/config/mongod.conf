# MongoDB配置文件
# 适用于MongoDB 5.0版本

# 网络设置
net:
  port: 27017
  bindIp: 0.0.0.0  # 允许所有网络接口访问（在Docker环境中是安全的）
  maxIncomingConnections: 65536

# 存储设置
storage:
  dbPath: /data/db
  journal:
    enabled: true
  engine: wiredTiger
  wiredTiger:
    engineConfig:
      cacheSizeGB: 1  # 根据服务器内存调整，通常为服务器内存的50%
    collectionConfig:
      blockCompressor: snappy  # 启用压缩以节省空间
    indexConfig:
      prefixCompression: true  # 启用索引前缀压缩

# 安全设置
security:
  authorization: enabled  # 启用认证

# 系统日志
# 在Docker容器中，日志默认输出到标准输出
# 如果需要文件日志，可以取消以下注释并调整路径
# systemLog:
#   destination: file
#   logAppend: true
#   path: /var/log/mongodb/mongod.log
#   logRotate: reopen
#   verbosity: 0

# 进程管理
processManagement:
  fork: false  # 在Docker容器中不应设置为true
  pidFilePath: /var/run/mongodb/mongod.pid

# 复制集（如果需要高可用性）
# replication:
#   replSetName: "rs0"
#   oplogSizeMB: 1024

# 操作探查器（生产环境通常禁用）
operationProfiling:
  slowOpThresholdMs: 100
  mode: off

# 诊断设置
diagnosticDataCollection:
  collectDiagnosticData: false